<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> mongodb常用命令之增查改删 · Hexo</title><meta name="description" content="今天这篇文章主要介绍下集合(collenction)的增查改删
切换到对应的数据库
12&amp;gt; use sb switched to db sb
接下来对对sb数据库里的集合进行操作
增db.collection.insertOne()将返回一个包含新插入的文档_id字段值的文档
1&lt;span class"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="https://github.com/runlijs" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">mongodb常用命令之增查改删</h1><div class="post-meta"><div class="post-time">Feb 16, 2017</div></div><div class="post-content"><p>今天这篇文章主要介绍下集合(collenction)的增查改删</p>
<p>切换到对应的数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; use sb </span><br><span class="line">switched to db sb</span><br></pre></td></tr></table></figure>
<p>接下来对对sb数据库里的集合进行操作</p>
<h1 id="u589E"><a href="#u589E" class="headerlink" title="增"></a>增</h1><p>db.collection.insertOne()将返回一个包含新插入的文档_id字段值的文档</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.invertory.insertOne(&#123; item: <span class="string">"canvas"</span>,qty: <span class="number">100</span>,tags:[<span class="string">"cotton"</span>],size:&#123;h:<span class="number">28</span>,w:<span class="number">35.5</span>,uom:<span class="string">"cm"</span>&#125;&#125;)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"acknowledged"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"insertedId"</span> : ObjectId(<span class="string">"58a50ac3ac45d884d168ae1e"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>db.collection.insertMany() 可以将多个文档插入到集合中。传递数组给方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.invertory.insertMany([</span><br><span class="line">  &#123; item: <span class="string">"journal"</span>, qty: <span class="number">25</span>, tags: [<span class="string">"blank"</span>, <span class="string">"red"</span>], size: &#123; h: <span class="number">14</span>, w: <span class="number">21</span>, uom: <span class="string">"cm"</span> &#125; &#125;,</span><br><span class="line">  &#123; item: <span class="string">"mat"</span>, qty: <span class="number">85</span>, tags: [<span class="string">"gray"</span>], size: &#123; h: <span class="number">27.9</span>, w: <span class="number">35.5</span>, uom: <span class="string">"cm"</span> &#125; &#125;,</span><br><span class="line">  &#123; item: <span class="string">"mousepad"</span>, qty: <span class="number">25</span>, tags: [<span class="string">"gel"</span>, <span class="string">"blue"</span>], size: &#123; h: <span class="number">19</span>, w: <span class="number">22.85</span>, uom: <span class="string">"cm"</span> &#125; &#125;</span><br><span class="line">])</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"acknowledged"</span> : <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"insertedIds"</span> : [</span><br><span class="line">    ObjectId(<span class="string">"58a50de1ac45d884d168ae1f"</span>),</span><br><span class="line">    ObjectId(<span class="string">"58a50de1ac45d884d168ae20"</span>),</span><br><span class="line">    ObjectId(<span class="string">"58a50de1ac45d884d168ae21"</span>)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上示例将三个新文档插入invertory集合中。 由于文档没有指定_id字段，MongoDB将为每个文档添加一个带有ObjectId值的_id字段。</p>
<p>db.collection.insert() 可以插入单个入或多个文档到collection集合中。<br>插入单个document时传参参考db.collection.insertOne()方法<br>插入多个documents时传参参考db.collection.insertMany()方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.invertory.insert(&#123; item: <span class="string">"webgl"</span>,qty: <span class="number">130</span>,tags:[<span class="string">"cotton"</span>],size:&#123;h:<span class="number">28</span>,w:<span class="number">35.5</span>,uom:<span class="string">"cm"</span>&#125;&#125;)</span><br><span class="line">WriteResult(&#123; <span class="string">"nInserted"</span> : <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>db.collection.insert() 插入单个document时返回一个WriteResult对象的状态信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;db.invertory.insert([</span><br><span class="line">  &#123; item: <span class="string">"journal"</span>, qty: <span class="number">25</span>, tags: [<span class="string">"blank"</span>, <span class="string">"red"</span>], size: &#123; h: <span class="number">14</span>, w: <span class="number">21</span>, uom: <span class="string">"cm"</span> &#125; &#125;,</span><br><span class="line">  &#123; item: <span class="string">"mat"</span>, qty: <span class="number">85</span>, tags: [<span class="string">"gray"</span>], size: &#123; h: <span class="number">27.9</span>, w: <span class="number">35.5</span>, uom: <span class="string">"cm"</span> &#125; &#125;,</span><br><span class="line">  &#123; item: <span class="string">"mousepad"</span>, qty: <span class="number">25</span>, tags: [<span class="string">"gel"</span>, <span class="string">"blue"</span>], size: &#123; h: <span class="number">19</span>, w: <span class="number">22.85</span>, uom: <span class="string">"cm"</span> &#125; &#125;</span><br><span class="line">])</span><br><span class="line">BulkWriteResult(&#123;</span><br><span class="line">  <span class="string">"writeErrors"</span> : [ ],</span><br><span class="line">  <span class="string">"writeConcernErrors"</span> : [ ],</span><br><span class="line">  <span class="string">"nInserted"</span> : <span class="number">3</span>,</span><br><span class="line">  <span class="string">"nUpserted"</span> : <span class="number">0</span>,</span><br><span class="line">  <span class="string">"nMatched"</span> : <span class="number">0</span>,</span><br><span class="line">  <span class="string">"nModified"</span> : <span class="number">0</span>,</span><br><span class="line">  <span class="string">"nRemoved"</span> : <span class="number">0</span>,</span><br><span class="line">  <span class="string">"upserted"</span> : [ ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>db.collection.insert() 插入多个documents时返回一个操作状态的BulkWriteResult对象，以上操作成功插入documents后返回的BulkWriteResult对象</p>
</div></article></div></section><footer><div class="paginator"><a class="prev"> </a><a href="/2017/02/15/mongodb常用命令之新建与删除数据库/" class="next">下一篇</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>