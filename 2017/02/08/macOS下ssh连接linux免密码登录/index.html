<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> macOS下ssh连接linux免密码登录 · Hexo</title><meta name="description" content="文本主要讲的，是如何简化mac连接到linux服务器的步骤，提交效率。
所谓的“免登陆”其实是不存在的，只是说，从验证密码的登录方式，改为公私钥对的登录验证方式。使用后者的方式，每次会由ssh客户端自动发送验证信息，所以就免去了人工输入密码，看起来好像“免登陆”一样。
关于这么做的原理，大家可以自己去Google，关键词是“非对称加密”，“RSA算法”，“基于ssh密钥对的自动登录”，等等，我就不多解释了。我直接说操作步骤吧：
1.生成密钥对2.用密码登录远程主机，将公钥拷贝过去3.done
第一步：生成密匙对12&lt;spa"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="/Vb/" target="_self" class="nav-list-link">V币商城</a></li><li class="nav-list-item"><a href="https://github.com/runlijs" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">macOS下ssh连接linux免密码登录</h1><div class="post-meta"><div class="post-time">Feb 8, 2017</div></div><div class="post-content"><p>文本主要讲的，是如何简化mac连接到linux服务器的步骤，提交效率。</p>
<p>所谓的“免登陆”其实是不存在的，只是说，从验证密码的登录方式，改为公私钥对的登录验证方式。使用后者的方式，每次会由ssh客户端自动发送验证信息，所以就免去了人工输入密码，看起来好像“免登陆”一样。</p>
<p>关于这么做的原理，大家可以自己去Google，关键词是“非对称加密”，“RSA算法”，“基于ssh密钥对的自动登录”，等等，我就不多解释了。我直接说操作步骤吧：</p>
<p>1.生成密钥对<br>2.用密码登录远程主机，将公钥拷贝过去<br>3.done</p>
<h1 id="u7B2C_u4E00_u6B65_uFF1A_u751F_u6210_u5BC6_u5319_u5BF9"><a href="#u7B2C_u4E00_u6B65_uFF1A_u751F_u6210_u5BC6_u5319_u5BF9" class="headerlink" title="第一步：生成密匙对"></a>第一步：生成密匙对</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="comment">#用户目录下 </span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="comment">#执行结果如下：</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">charles@mac:~ &gt; ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/Users/charles/.ssh/id_rsa):</span><br><span class="line">Created directory ‘/Users/charles/.ssh’.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/charles/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/charles/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">c8:<span class="number">4</span>b:<span class="number">85</span>:<span class="number">87</span>:<span class="number">90</span>:<span class="number">7</span>c:<span class="number">1</span>这一段kdy隐藏....... charles@TCMBP.local</span><br><span class="line">The key’s randomart image is:</span><br><span class="line">+–[ RSA <span class="number">2048</span>]—-+</span><br><span class="line">| … .. o=.. |</span><br><span class="line">| +.*o. …+ |</span><br><span class="line">| Bo+o. o.. |</span><br><span class="line">| …+E o |</span><br><span class="line">| + S |</span><br><span class="line">| . . |</span><br><span class="line">| . |</span><br><span class="line">| |</span><br><span class="line">| |</span><br><span class="line">+—————–+</span><br></pre></td></tr></table></figure>
<p>注意：提示enter passphrase的时候，不要输入，因为你本来就想少打一次密码的，这里如果设置了用密码保护私钥，那登录的时候还是要输密码，就白做了。</p>
<p>做完这个步骤后，cd ~/.ssh，你就可以看到你刚才生成的密钥对，id_rsa是私钥，id_rsa.pub是公钥。下一步，就是把公钥拷贝到目标主机上。</p>
<h1 id="u7B2C_u4E8C_u6B65_uFF1A_u5C06_u516C_u94A5_u62F7_u8D1D_u5230_u76EE_u6807_u4E3B_u673A"><a href="#u7B2C_u4E8C_u6B65_uFF1A_u5C06_u516C_u94A5_u62F7_u8D1D_u5230_u76EE_u6807_u4E3B_u673A" class="headerlink" title="第二步：将公钥拷贝到目标主机"></a>第二步：将公钥拷贝到目标主机</h1><p>用ssh登录到目标主机，<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@host</span><br></pre></td></tr></table></figure></p>
<p>username主机登录用户<br>host 主机IP<br>这里需要手动输入登录密码</p>
<p>然后cd ~/.ssh目录，如果目录不存在，那么要自己创建mkdir -p ~/.ssh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br></pre></td></tr></table></figure>
<p>你今后要用哪个帐户登录主机，就在哪个帐户的home目录下操作，如果要免登陆root，就要去/root下操作。使用~比较好，不用多想了。</p>
<p>有了.ssh目录后，进去，然后把id_rsa.pub传过去，<br>可以用scp命令，这里要做的一个主要操作，就是将id_rsa.pub，的文件内容，写到一个叫authorized_keys的文件中去<br>如果目标主机的相应用户名下已经有了.ssh目录和authorized_keys文件，那你操作要小心一点，可能别人也做过免登陆的设置，这个时候你要小心不要把别人的设置给覆盖了</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp ~/.ssh/id_rsa.pub username@host:/home/user/.ssh #&#36825;&#37324;&#38656;&#35201;&#25163;&#21160;&#36755;&#20837;&#19968;&#27425;&#23494;&#30721;&#10;#&#25991;&#20214;&#19978;&#20256;&#25104;&#21151;&#21518;&#65292;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#10;ssh username@host #&#36825;&#37324;&#38656;&#35201;&#25163;&#21160;&#36755;&#20837;&#19968;&#27425;&#23494;&#30721;&#10;#&#22914;&#26524;.ssh&#30446;&#24405;&#19981;&#23384;&#22312; &#21019;&#24314;&#10;mkdir -p ~/.ssh&#10;cd ~/.ssh&#10;#&#22914;&#26524;&#27809;&#26377;authorized_keys&#25991;&#20214;&#38656;&#35201;&#21019;&#24314;&#25991;&#20214;&#10;touch authorized_keys&#10;cat id_rsa.pub &#62;&#62; authorized_keys ## &#23558;&#20844;&#38053;&#36861;&#21152;&#21040; authorized_keys &#25991;&#20214;&#26368;&#21518;&#19968;&#34892;</span><br></pre></td></tr></table></figure>
<p>到此免密码登录基本完成</p>
<p>之后ssh连接的时候，就不需要手动输入密码</p>
</div></article></div></section><footer><div class="paginator"><a href="/2017/02/15/mongodb常用命令/" class="prev">上一篇</a><a href="/2017/02/08/mac安装配置mongodb/" class="next">下一篇</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>